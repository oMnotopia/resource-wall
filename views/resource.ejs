<!DOCTYPE html>
<html lang="en">

<%- include('partials/_head') %>

<body>
  <%- include('partials/_header') %>
  <main>
    <div class="resource-container">
      <div class="img-container">
        <a href="<%=url%>">
          <img src="<%=imgUrl%>" alt="<%=title%>"/>
        </a>
      </div>
      <div class="content-container">
        <div class="info-container">
          <a class="url" href="<%=url%>"><%=url%></a>
          <h2 class="title"><%=title%></h2>
          <div class="description"><%=description%></div>
          <div class="category"><%=category%></div>
        </div>
        <div class="social-icons">
          <div class="rating-container">
            <div class="stars">

                <% for (let i=1; i <= hasUserRated; i++) { %>
                  <i class="fa-solid fa-star star star-<%=i%>"></i>
                <% } %>
                <% for (let i = hasUserRated+1; i <= 5; i++) { %>
                  <i class="fa-regular fa-star star star-<%=i%>"></i>
                <% } %>

            </div>
            <div class="rating"><%=rating%></div>
          </div>
          <div class="like-container">
            <% if (hasUserLiked) { %>
              <i class="fa-solid fa-thumbs-up" id="like-icon"></i>
            <% } else { %>
              <i class="fa-regular fa-thumbs-up" id="like-icon"></i>
            <% } %>
            <div class="likes"><%=likes%></div>
          </div>
        </div>
        <section class="comments">
          <h2 class="comments-heading">Comments</h2>
          <div class="comments-old">
            <% for (const c of comments) { %>
              <div class="comment-info">
                <p><b><%= c.name %></b></p>
                <p><%= c.comment %></p>
              </div>

            <% } %>
          </div>

        </section>
        <div class="comment-new">
          <form action="/resources/<%=resourceid%>/:commentid" method="POST" class="comment-form">
            <input type="text" name="text" placeholder="Add a comment" id="comment-text"></textarea>
          </form>
        </div>
      </div>
    </div>
  </main>
</body>
</html>
