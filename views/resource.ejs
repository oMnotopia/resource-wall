<!DOCTYPE html>
<html lang="en">

<%- include('partials/_head') %>

<body>
  <%- include('partials/_header') %>
  <main class="individual-resource">
    <div class="resource-container">
      <div class="img-container">
        <a href="<%=url%>">
          <img src="<%=imgUrl%>" alt="<%=title%>"/>
        </a>
      </div>
      <div class="content-container">
        <div class="info-container">
          <h2 class="title"><%=title%></h2>
          <div class="below-title">
            <h4 class="description-label">Description</h4>
            <div class="rating-container">
              <div class="rating-label">Average Rating:</div>
              <% if (rating) { %>
                <div class="rating"><%=rating%></div>
              <% } else { %>
                <div class="rating">N/A</div>
              <% } %>

            </div>
          </div>
          <div class="description"> <%=description%></div>
          <div class="category"><b>Category: </b><%=category%></div>
        </div>
        <div class="social-icons">
          <div class="stars">
            <% for (let i=1; i <= hasUserRated; i++) { %>
              <i class="fa-solid fa-regular fa-star star star-<%=i%>"></i>
            <% } %>
            <% for (let i = hasUserRated+1; i <= 5; i++) { %>
              <i class="fa-regular fa-star star star-<%=i%>"></i>
            <% } %>
          </div>
          <div class="like-container">
            <% if (hasUserLiked) { %>
              <i class="fa-solid fa-thumbs-up" id="like-icon"></i>
            <% } else { %>
              <i class="fa-regular fa-thumbs-up" id="like-icon"></i>
            <% } %>
            <div class="likes"><%=likes%></div>
          </div>
        </div>
        <section class="comments">
          <h3 class="comments-heading">Comments</h3>
          <div class="comments-old">
            <% for (const c of comments) { %>
              <div class="comment-info">
                <div class="comment-user"><b><%= c.name %></b></div>
                <div><%= c.comment %></div>
              </div>
            <% } %>
          </div>
          <div class="comment-new">
            <form action="/resources/<%=resourceid%>/:commentid" method="POST" class="comment-form">
              <input type="text" name="text" placeholder="Add a comment" id="comment-text"></textarea>
            </form>
          </div>
          </div>
        </section>
    </div>
  </main>
</body>
</html>
